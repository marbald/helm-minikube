FROM node:16-alpine

ARG PG_DB_VAR
ARG PG_USER_VAR
ARG PG_PASS_VAR
ARG PGHOST_VAR
ARG PGPORT_VAR

WORKDIR /app
COPY app.js ./
COPY package*.json ./

RUN npm install

ENV PGHOST=$PGHOST_VAR
ENV PGDATABASE=$PG_DB_VAR
ENV PGUSER=$PG_USER_VAR
ENV PGPASSWORD=$PG_PASS_VAR
ENV PGPORT=$PGPORT_VAR

EXPOSE 3000
CMD ["node", "app.js"]
